#	-*- makefile -*-

PATH:=$(CWD)../../tools/diabolo/software:$(PATH)

DIABOLO_OPTS	+=	--flash-cache=build/flash-cache.bin # even faster
DIABOLO_OPTS	+=	--mcu=$(MCU)

erase:
	diabolo.py $(DIABOLO_OPTS)	\
		--erase-flash

burn:	$(OBJDIR)/$(OUT).bin
	diabolo.py $(DIABOLO_OPTS)	\
		--flash-file $^

diabolo:
	diabolo.py $(DIABOLO_OPTS)

reset:
	diabolo.py --reset

# crc:	$(OBJDIR)/$(OUT).bin
# 	diabolo.py -c $(OBJDIR)/$(OUT).bin

.PHONY: erase burn diabolo reset
